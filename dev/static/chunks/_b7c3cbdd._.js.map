{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/vata/HydroX-exchange/frontend/src/components/Chart.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport {\r\n  createChart,\r\n  ColorType,\r\n  IChartApi,\r\n  CandlestickSeries,\r\n  ISeriesApi,\r\n  CandlestickData,\r\n  Time,\r\n} from \"lightweight-charts\";\r\nimport { marketApi, getWSClient, Kline } from \"@/lib/api\";\r\n\r\ninterface ChartProps {\r\n  symbol?: string;\r\n}\r\n\r\ntype Interval = \"1m\" | \"5m\" | \"1d\";\r\n\r\nexport default function Chart({ symbol = \"BTC_USDM\" }: ChartProps) {\r\n  const chartContainerRef = useRef<HTMLDivElement>(null);\r\n  const chartRef = useRef<IChartApi | null>(null);\r\n  const seriesRef = useRef<ISeriesApi<\"Candlestick\"> | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [interval, setInterval] = useState<Interval>(\"1m\");\r\n\r\n  // 차트 초기화\r\n  useEffect(() => {\r\n    if (!chartContainerRef.current) return;\r\n\r\n    const chart = createChart(chartContainerRef.current, {\r\n      layout: {\r\n        background: { type: ColorType.Solid, color: \"transparent\" },\r\n        textColor: \"#6b7280\",\r\n      },\r\n      grid: {\r\n        vertLines: { color: \"#1a1a1a\" },\r\n        horzLines: { color: \"#1a1a1a\" },\r\n      },\r\n      width: chartContainerRef.current.clientWidth,\r\n      height: chartContainerRef.current.clientHeight || 400,\r\n      crosshair: {\r\n        vertLine: {\r\n          color: \"#00FFE0\",\r\n          labelBackgroundColor: \"#0f0f0f\",\r\n        },\r\n        horzLine: {\r\n          color: \"#00FFE0\",\r\n          labelBackgroundColor: \"#0f0f0f\",\r\n        },\r\n      },\r\n      timeScale: {\r\n        timeVisible: true,\r\n        secondsVisible: true,\r\n        borderColor: \"#1a1a1a\",\r\n      },\r\n      rightPriceScale: {\r\n        borderColor: \"#1a1a1a\",\r\n      },\r\n    });\r\n\r\n    chartRef.current = chart;\r\n\r\n    const candlestickSeries = chart.addSeries(CandlestickSeries, {\r\n      upColor: \"#00FFE0\",\r\n      downColor: \"#ef4444\",\r\n      borderDownColor: \"#ef4444\",\r\n      borderUpColor: \"#00FFE0\",\r\n      wickDownColor: \"#ef4444\",\r\n      wickUpColor: \"#00FFE0\",\r\n    });\r\n\r\n    seriesRef.current = candlestickSeries;\r\n\r\n    const handleResize = () => {\r\n      if (chartContainerRef.current) {\r\n        chart.applyOptions({\r\n          width: chartContainerRef.current.clientWidth,\r\n          height: chartContainerRef.current.clientHeight,\r\n        });\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"resize\", handleResize);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"resize\", handleResize);\r\n      chart.remove();\r\n    };\r\n  }, []);\r\n\r\n  // 데이터 로드 + 실시간 업데이트\r\n  useEffect(() => {\r\n    if (!seriesRef.current || !chartRef.current) return;\r\n\r\n    // Time scale 설정 (interval에 따라)\r\n    if (chartRef.current) {\r\n      chartRef.current.timeScale().applyOptions({\r\n        timeVisible: true,\r\n        secondsVisible: interval === \"1m\" || interval === \"5m\",\r\n      });\r\n    }\r\n\r\n    const loadData = async () => {\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      try {\r\n        // 선택한 interval로 데이터 로드\r\n        const klines = await marketApi.getKlines(symbol, interval);\r\n        \r\n        const chartData: CandlestickData<Time>[] = klines.map((k: Kline) => ({\r\n          time: k.time as Time,\r\n          open: k.open,\r\n          high: k.high,\r\n          low: k.low,\r\n          close: k.close,\r\n        }));\r\n\r\n        // Sort by time\r\n        chartData.sort((a, b) => (a.time as number) - (b.time as number));\r\n\r\n        if (seriesRef.current) {\r\n          seriesRef.current.setData(chartData);\r\n        }\r\n        if (chartRef.current) {\r\n          chartRef.current.timeScale().fitContent();\r\n        }\r\n        \r\n        setIsLoading(false);\r\n      } catch (err) {\r\n        console.error(\"Failed to load chart data:\", err);\r\n        setError(\"Failed to load chart data\");\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    loadData();\r\n\r\n    // Subscribe to real-time kline updates (1m만 실시간 업데이트)\r\n    const ws = getWSClient();\r\n    ws.connect();\r\n\r\n    let unsubscribe: (() => void) | null = null;\r\n    let reloadInterval: number | null = null;\r\n    \r\n    // 1분봉만 실시간 업데이트 (다른 interval은 주기적으로 재로드)\r\n    if (interval === \"1m\") {\r\n      unsubscribe = ws.subscribe(`kline.1m.${symbol}`, (data: unknown) => {\r\n        const kline = data as { t: number; o: number; h: number; l: number; c: number; v: number };\r\n        if (seriesRef.current) {\r\n          seriesRef.current.update({\r\n            time: kline.t as Time,\r\n            open: kline.o,\r\n            high: kline.h,\r\n            low: kline.l,\r\n            close: kline.c,\r\n          });\r\n        }\r\n      });\r\n    } else {\r\n      // 5m, 1d는 주기적으로 재로드\r\n      reloadInterval = window.setInterval(() => {\r\n        loadData();\r\n      }, interval === \"5m\" ? 5000 : 60000); // 5분봉은 5초마다, 1일봉은 1분마다\r\n    }\r\n\r\n    return () => {\r\n      if (unsubscribe) unsubscribe();\r\n      if (reloadInterval) clearInterval(reloadInterval);\r\n    };\r\n  }, [symbol, interval]);\r\n\r\n  const intervals: { value: Interval; label: string }[] = [\r\n    { value: \"1m\", label: \"1m\" },\r\n    { value: \"5m\", label: \"5m\" },\r\n    { value: \"1d\", label: \"1d\" },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"relative w-full h-full rounded-lg border border-[#1a1a1a] bg-[#0f0f0f] flex flex-col\">\r\n      {/* Interval 선택 버튼 */}\r\n      <div className=\"flex items-center gap-2 p-3 border-b border-[#1a1a1a]\">\r\n        {intervals.map((item) => (\r\n          <button\r\n            key={item.value}\r\n            onClick={() => setInterval(item.value)}\r\n            className={`px-3 py-1.5 text-sm font-medium rounded transition-colors ${\r\n              interval === item.value\r\n                ? \"bg-[#00FFE0]/10 text-[#00FFE0] border border-[#00FFE0]/30\"\r\n                : \"text-zinc-400 hover:text-zinc-200 hover:bg-[#1a1a1a]\"\r\n            }`}\r\n          >\r\n            {item.label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n      \r\n      <div ref={chartContainerRef} className=\"flex-1 w-full\" />\r\n      \r\n      {isLoading && (\r\n        <div className=\"absolute inset-0 flex items-center justify-center bg-[#0f0f0f]/80 z-10\">\r\n          <div className=\"flex items-center gap-2 text-[#00FFE0]\">\r\n            <svg className=\"animate-spin h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n              <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n              <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n            </svg>\r\n            <span>Loading chart...</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {error && !isLoading && (\r\n        <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\r\n          <div className=\"text-center text-zinc-500\">\r\n            <svg className=\"w-12 h-12 mx-auto mb-2 opacity-30\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\r\n            </svg>\r\n            <p className=\"text-sm\">{error}</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 343, "column": 0}, "map": {"version":3,"sources":["file:///Users/vata/HydroX-exchange/frontend/src/components/TradePanel.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { marketApi, accountApi, Ticker } from \"@/lib/api\";\r\nimport { useWallet } from \"@/contexts/WalletContext\";\r\nimport { useToast } from \"@/components/Toast\";\r\n\r\ninterface TradePanelProps {\r\n  symbol?: string;\r\n  walletAddress?: string | null;\r\n}\r\n\r\nconst TradePanel = ({ symbol = \"BTC_USDM\", walletAddress }: TradePanelProps) => {\r\n  const { openPosition } = useWallet();\r\n  const { showToast } = useToast();\r\n  const [activeTab, setActiveTab] = useState(\"buy\"); // 'buy' or 'sell'\r\n  const [marginType, setMarginType] = useState(\"Cross\"); // 'Cross' or 'Isolated'\r\n  const [leverage, setLeverage] = useState(\"10\"); // Numeric leverage\r\n  const [orderType, setOrderType] = useState(\"market\"); // market, limit\r\n  const [price, setPrice] = useState(\"\");\r\n  const [amount, setAmount] = useState(\"\");\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [ticker, setTicker] = useState<Ticker | null>(null);\r\n  const [balance, setBalance] = useState<number>(0);\r\n  const [isLoadingBalance, setIsLoadingBalance] = useState(false);\r\n\r\n  const leverageOptions = [\"1\", \"5\", \"10\", \"20\", \"50\", \"100\"];\r\n\r\n  // Load balance when wallet is connected\r\n  useEffect(() => {\r\n    if (!walletAddress) {\r\n      setBalance(0);\r\n      return;\r\n    }\r\n\r\n    const loadBalance = async () => {\r\n      setIsLoadingBalance(true);\r\n      try {\r\n        const usdmBalance = await accountApi.getUSDMBalance(walletAddress);\r\n        setBalance(usdmBalance);\r\n      } catch (err) {\r\n        console.error(\"Failed to load balance:\", err);\r\n        setBalance(0);\r\n      } finally {\r\n        setIsLoadingBalance(false);\r\n      }\r\n    };\r\n\r\n    loadBalance();\r\n    // Refresh balance every 30 seconds\r\n    const interval = setInterval(loadBalance, 30000);\r\n    return () => clearInterval(interval);\r\n  }, [walletAddress]);\r\n\r\n  // Load current price for reference\r\n  useEffect(() => {\r\n    const loadTicker = async () => {\r\n      try {\r\n        const data = await marketApi.getTicker(symbol);\r\n        setTicker(data);\r\n      } catch (err) {\r\n        console.error(\"Failed to load ticker:\", err);\r\n      }\r\n    };\r\n    loadTicker();\r\n    const interval = setInterval(loadTicker, 5000);\r\n    return () => clearInterval(interval);\r\n  }, [symbol]);\r\n\r\n  const handleSubmit = async () => {\r\n    if (!walletAddress) {\r\n      setError(\"Please connect your wallet first\");\r\n      return;\r\n    }\r\n\r\n    if (!amount || (orderType === \"limit\" && !price)) {\r\n      setError(\"Please fill in all required fields\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const entryPrice = orderType === \"limit\" ? parseFloat(price) : (ticker?.last_price || 0);\r\n      const collateralAmount = parseFloat(amount); // USDM margin\r\n      const leverageValue = parseInt(leverage);\r\n\r\n      // 레버리지가 적용된 총 USD 가치 (예: 10 USD * 50x = 500 USD)\r\n      const totalPositionValue = collateralAmount * leverageValue;\r\n\r\n      // 총 USD 가치를 BTC 수량으로 변환\r\n      const btcAmount = totalPositionValue / entryPrice;\r\n\r\n      // Build, sign, and submit TX using Lucid (via WalletContext)\r\n      const txHash = await openPosition({\r\n        symbol,\r\n        side: activeTab === \"buy\" ? \"Long\" : \"Short\",\r\n        entryPrice,\r\n        amount: btcAmount,\r\n        collateral: collateralAmount,\r\n        leverage: leverageValue,\r\n      });\r\n\r\n      // Clear form\r\n      setAmount(\"\");\r\n      if (orderType === \"limit\") setPrice(\"\");\r\n\r\n      showToast({\r\n        type: \"success\",\r\n        title: \"Position Opened Successfully\",\r\n        message: `${activeTab === \"buy\" ? \"Long\" : \"Short\"} position created on-chain`,\r\n        details: [\r\n          { label: \"TX Hash\", value: txHash },\r\n          { label: \"Collateral\", value: `${collateralAmount.toLocaleString()} USDM` },\r\n          { label: \"Total Value\", value: `$${totalPositionValue.toLocaleString()}` },\r\n          { label: \"Size\", value: `${btcAmount.toFixed(4)} BTC` },\r\n        ],\r\n      });\r\n    } catch (err: unknown) {\r\n      console.error(\"Failed to place order:\", err);\r\n      const error = err as { message?: string; info?: string };\r\n      if (error.message?.includes(\"User declined\")) {\r\n        setError(\"Transaction was rejected by the wallet.\");\r\n      } else if (error.message?.includes(\"position contract address not configured\")) {\r\n        setError(\"Position contract not deployed yet. Please try again later.\");\r\n      } else {\r\n        setError(error.message || \"Failed to place order. Please try again.\");\r\n      }\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const quoteAsset = symbol.split(\"_\")[1] || \"USDM\";\r\n\r\n  // Calculate estimated total (입력값 * 레버리지)\r\n  const leverageValue = parseInt(leverage) || 1;\r\n  const marginAmount = amount ? parseFloat(amount) : 0;\r\n  const estimatedTotal = marginAmount * leverageValue;\r\n\r\n  return (\r\n    <div className=\"w-full rounded-lg border border-[#1a1a1a] bg-[#0f0f0f] p-4 text-white h-full\">\r\n      {/* Buy/Sell Tabs */}\r\n      <div className=\"flex gap-2 mb-4\">\r\n        <button\r\n          onClick={() => setActiveTab(\"buy\")}\r\n          className={`flex-1 py-2.5 text-sm font-bold rounded transition-all ${\r\n            activeTab === \"buy\"\r\n              ? \"bg-[#00FFE0] text-black\"\r\n              : \"bg-[#141414] border border-[#1f1f1f] text-zinc-400 hover:text-zinc-200 hover:border-[#00FFE0]/30\"\r\n          }`}\r\n        >\r\n          Long\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveTab(\"sell\")}\r\n          className={`flex-1 py-2.5 text-sm font-bold rounded transition-all ${\r\n            activeTab === \"sell\"\r\n              ? \"bg-red-600 text-white\"\r\n              : \"bg-[#141414] border border-[#1f1f1f] text-zinc-400 hover:text-zinc-200 hover:border-red-500/30\"\r\n          }`}\r\n        >\r\n          Short\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"mt-4 space-y-4\">\r\n        {/* Balance Display */}\r\n        <div className=\"flex justify-between items-center px-1\">\r\n          <span className=\"text-xs text-zinc-400 font-medium uppercase tracking-wider\">Available Balance</span>\r\n          <div className=\"flex items-center gap-1.5\">\r\n            {!walletAddress ? (\r\n              <span className=\"text-zinc-500 text-sm\">--</span>\r\n            ) : isLoadingBalance ? (\r\n              <span className=\"text-zinc-400 text-sm animate-pulse\">Loading...</span>\r\n            ) : (\r\n              <span className=\"text-[#00FFE0] font-bold text-sm\">{balance.toLocaleString()}</span>\r\n            )}\r\n            <span className=\"text-zinc-500 text-[10px] font-bold\">USDM</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Order Type */}\r\n        <div className=\"flex gap-2\">\r\n          <button\r\n            onClick={() => setOrderType(\"market\")}\r\n            className={`flex-1 py-1.5 text-sm rounded transition-all ${\r\n              orderType === \"market\"\r\n                ? \"bg-[#00FFE0]/10 text-[#00FFE0] border border-[#00FFE0]/30\"\r\n                : \"bg-[#141414] border border-[#1f1f1f] text-zinc-400 hover:text-zinc-200\"\r\n            }`}\r\n          >\r\n            Market\r\n          </button>\r\n          <button\r\n            onClick={() => setOrderType(\"limit\")}\r\n            className={`flex-1 py-1.5 text-sm rounded transition-all ${\r\n              orderType === \"limit\"\r\n                ? \"bg-[#00FFE0]/10 text-[#00FFE0] border border-[#00FFE0]/30\"\r\n                : \"bg-[#141414] border border-[#1f1f1f] text-zinc-400 hover:text-zinc-200\"\r\n            }`}\r\n          >\r\n            Limit\r\n          </button>\r\n        </div>\r\n\r\n        {/* Margin Type */}\r\n        <div className=\"flex space-x-2\">\r\n          <div className=\"flex-1\">\r\n            <div className=\"flex justify-between bg-[#141414] border border-[#1f1f1f] rounded p-1\">\r\n              <button\r\n                onClick={() => setMarginType(\"Cross\")}\r\n                className={`flex-1 py-1 text-sm rounded transition-all ${\r\n                  marginType === \"Cross\"\r\n                    ? \"bg-[#00FFE0]/10 text-[#00FFE0] border border-[#00FFE0]/30\"\r\n                    : \"text-zinc-400 hover:bg-[#1a1a1a] hover:text-zinc-200\"\r\n                }`}\r\n              >\r\n                Cross\r\n              </button>\r\n              <button\r\n                onClick={() => setMarginType(\"Isolated\")}\r\n                className={`flex-1 py-1 text-sm rounded transition-all ${\r\n                  marginType === \"Isolated\"\r\n                    ? \"bg-[#00FFE0]/10 text-[#00FFE0] border border-[#00FFE0]/30\"\r\n                    : \"text-zinc-400 hover:bg-[#1a1a1a] hover:text-zinc-200\"\r\n                }`}\r\n              >\r\n                Isolated\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Leverage */}\r\n        <div>\r\n          <label className=\"block text-xs text-zinc-400 mb-1\">Leverage</label>\r\n          <div className=\"flex justify-between bg-[#141414] border border-[#1f1f1f] rounded p-1\">\r\n            {leverageOptions.map((option) => (\r\n              <button\r\n                key={option}\r\n                onClick={() => setLeverage(option)}\r\n                className={`flex-1 py-1 text-sm rounded transition-all ${\r\n                  leverage === option\r\n                    ? \"bg-[#00FFE0]/10 text-[#00FFE0] border border-[#00FFE0]/30\"\r\n                    : \"text-zinc-400 hover:bg-[#1a1a1a] hover:text-zinc-200\"\r\n                }`}\r\n              >\r\n                {option}x\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Price (for Limit orders) */}\r\n        {orderType === \"limit\" && (\r\n          <div>\r\n            <label htmlFor=\"price\" className=\"block text-xs text-zinc-400 mb-1\">\r\n              Price (USD)\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"price\"\r\n              value={price}\r\n              onChange={(e) => setPrice(e.target.value)}\r\n              placeholder={ticker?.last_price?.toFixed(2) || \"0.00\"}\r\n              className=\"w-full bg-[#141414] border border-[#1f1f1f] rounded p-2 text-sm focus:border-[#00FFE0]/50 focus:outline-none focus:ring-1 focus:ring-[#00FFE0]/20 transition-all\"\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {orderType === \"market\" && (\r\n          <div className=\"bg-[#141414] border border-[#1f1f1f] rounded p-2\">\r\n            <div className=\"flex justify-between text-sm\">\r\n              <span className=\"text-zinc-400\">Price (USD)</span>\r\n              <span className=\"text-white\">Market</span>\r\n            </div>\r\n            {ticker && (\r\n              <div className=\"flex justify-between text-xs mt-1\">\r\n                <span className=\"text-zinc-500\">Last price</span>\r\n                <span className=\"text-[#00FFE0]\">\r\n                  ${ticker.last_price.toLocaleString()}\r\n                </span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Amount */}\r\n        <div>\r\n          <label htmlFor=\"amount\" className=\"block text-xs text-zinc-400 mb-1\">\r\n            Amount ({quoteAsset})\r\n          </label>\r\n          <div className=\"relative\">\r\n            <input\r\n              type=\"text\"\r\n              id=\"amount\"\r\n              value={amount}\r\n              onChange={(e) => setAmount(e.target.value)}\r\n              placeholder=\"0.00\"\r\n              className=\"w-full bg-[#141414] border border-[#1f1f1f] rounded p-2 pr-12 text-sm focus:border-[#00FFE0]/50 focus:outline-none focus:ring-1 focus:ring-[#00FFE0]/20 transition-all\"\r\n            />\r\n            <div className=\"absolute right-3 top-1/2 -translate-y-1/2 text-[10px] font-bold text-zinc-500\">\r\n              USDM\r\n            </div>\r\n          </div>\r\n          {amount && ticker && (\r\n            <div className=\"mt-1.5 flex justify-between text-[10px]\">\r\n              <span className=\"text-zinc-500 font-medium\">Equiv. to</span>\r\n              <span className=\"text-[#00FFE0] font-bold\">\r\n                {(estimatedTotal / (orderType === \"limit\" && price ? parseFloat(price) : ticker.last_price)).toFixed(4)} BTC\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Total */}\r\n        <div className=\"flex justify-between text-xs text-zinc-400 py-2 border-t border-[#1f1f1f]\">\r\n          <span>Estimated Total</span>\r\n          <span className=\"text-white\">\r\n            ${estimatedTotal.toLocaleString(undefined, {\r\n              minimumFractionDigits: 2,\r\n              maximumFractionDigits: 2,\r\n            })}\r\n          </span>\r\n        </div>\r\n\r\n        {/* Error Message */}\r\n        {error && (\r\n          <div className=\"text-red-400 text-xs bg-red-500/10 border border-red-500/30 rounded p-2\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        {/* Submit Button */}\r\n        {activeTab === \"buy\" ? (\r\n          <button\r\n            onClick={handleSubmit}\r\n            disabled={isSubmitting}\r\n            className={`w-full font-bold py-2.5 px-4 rounded transition-all ${\r\n              isSubmitting\r\n                ? \"bg-zinc-600 text-zinc-400 cursor-not-allowed\"\r\n                : \"bg-[#00FFE0] hover:bg-[#00FFE0]/90 text-black hover:shadow-[0_0_20px_rgba(0,255,224,0.4)]\"\r\n            }`}\r\n          >\r\n            {isSubmitting ? \"Placing Order...\" : `Buy / Long BTC`}\r\n          </button>\r\n        ) : (\r\n          <button\r\n            onClick={handleSubmit}\r\n            disabled={isSubmitting}\r\n            className={`w-full font-bold py-2.5 px-4 rounded transition-all ${\r\n              isSubmitting\r\n                ? \"bg-zinc-600 text-zinc-400 cursor-not-allowed\"\r\n                : \"bg-red-600 hover:bg-red-700 text-white hover:shadow-[0_0_15px_rgba(239,68,68,0.4)]\"\r\n            }`}\r\n          >\r\n            {isSubmitting ? \"Placing Order...\" : `Sell / Short BTC`}\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TradePanel;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 961, "column": 0}, "map": {"version":3,"sources":["file:///Users/vata/HydroX-exchange/frontend/src/components/MarketInfo.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { marketApi, getWSClient, Ticker } from \"@/lib/api\";\r\n\r\ninterface MarketInfoProps {\r\n  symbol: string;\r\n}\r\n\r\nexport default function MarketInfo({ symbol }: MarketInfoProps) {\r\n  const [ticker, setTicker] = useState<Ticker | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const loadTicker = async () => {\r\n      try {\r\n        const data = await marketApi.getTicker(symbol);\r\n        setTicker(data);\r\n      } catch (err) {\r\n        console.error(\"Failed to load ticker:\", err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadTicker();\r\n\r\n    // Subscribe to real-time updates\r\n    const ws = getWSClient();\r\n    ws.connect();\r\n\r\n    const unsubscribe = ws.subscribe(\"ticker\", (data: unknown) => {\r\n      const tickerData = data as Ticker;\r\n      if (tickerData.symbol === symbol) {\r\n        setTicker((prev: Ticker | null) => prev ? { ...prev, ...tickerData } : tickerData);\r\n      }\r\n    });\r\n\r\n    // Refresh every 30 seconds as backup\r\n    const interval = setInterval(loadTicker, 30000);\r\n\r\n    return () => {\r\n      unsubscribe();\r\n      clearInterval(interval);\r\n    };\r\n  }, [symbol]);\r\n\r\n  const formatPrice = (value: number | undefined) => {\r\n    if (value === undefined) return \"--\";\r\n    if (value >= 1000) {\r\n      return value.toLocaleString(\"en-US\", {\r\n        minimumFractionDigits: 2,\r\n        maximumFractionDigits: 2,\r\n      });\r\n    }\r\n    return value.toFixed(4);\r\n  };\r\n\r\n  const formatNumber = (value: number | undefined) => {\r\n    if (value === undefined) return \"--\";\r\n    if (value >= 1000000) {\r\n      return (value / 1000000).toFixed(2) + \"M\";\r\n    } else if (value >= 1000) {\r\n      return (value / 1000).toFixed(2) + \"K\";\r\n    }\r\n    return value.toFixed(2);\r\n  };\r\n\r\n  const isPositive = (ticker?.price_change_percent ?? 0) >= 0;\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"px-6 py-2 flex-1 flex items-center\">\r\n        <div className=\"text-zinc-500 text-sm animate-pulse\">Loading...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"px-6 py-2 flex-1 flex items-center\">\r\n      <div className=\"flex items-center gap-8\">\r\n        {/* 현재 가격 */}\r\n        <div className=\"flex flex-col\">\r\n          <span\r\n            className={`text-xl font-bold ${\r\n              isPositive \r\n                ? \"text-[#00FFE0] drop-shadow-[0_0_8px_rgba(0,255,224,0.4)]\" \r\n                : \"text-red-500\"\r\n            }`}\r\n          >\r\n            ${formatPrice(ticker?.last_price)}\r\n          </span>\r\n          <span className=\"text-xs text-zinc-500\">\r\n            Mark ${formatPrice(ticker?.mark_price)}\r\n          </span>\r\n        </div>\r\n\r\n        {/* 구분선 */}\r\n        <div className=\"h-8 w-px bg-[#1f1f1f]\" />\r\n\r\n        {/* 24h 변동률 */}\r\n        <div className=\"flex flex-col\">\r\n          <span className=\"text-[10px] text-zinc-500 uppercase\">24h Change</span>\r\n          <span\r\n            className={`text-sm font-medium ${\r\n              isPositive ? \"text-[#00FFE0]\" : \"text-red-500\"\r\n            }`}\r\n          >\r\n            {isPositive ? \"+\" : \"\"}\r\n            {ticker?.price_change_percent?.toFixed(2) ?? \"--\"}%\r\n          </span>\r\n        </div>\r\n\r\n        {/* 24h 고가 */}\r\n        <div className=\"flex flex-col\">\r\n          <span className=\"text-[10px] text-zinc-500 uppercase\">24h High</span>\r\n          <span className=\"text-sm text-zinc-200\">${formatPrice(ticker?.high_24h)}</span>\r\n        </div>\r\n\r\n        {/* 24h 저가 */}\r\n        <div className=\"flex flex-col\">\r\n          <span className=\"text-[10px] text-zinc-500 uppercase\">24h Low</span>\r\n          <span className=\"text-sm text-zinc-200\">${formatPrice(ticker?.low_24h)}</span>\r\n        </div>\r\n\r\n        {/* 24h 거래량 (플랫폼 자체 데이터) */}\r\n        <div className=\"flex flex-col\">\r\n          <span className=\"text-[10px] text-zinc-500 uppercase\">24h Volume</span>\r\n          <span className=\"text-sm text-zinc-500\">\r\n            -- {symbol.split(\"_\")[0]}\r\n          </span>\r\n        </div>\r\n\r\n        {/* 24h 거래대금 (플랫폼 자체 데이터) */}\r\n        <div className=\"flex flex-col\">\r\n          <span className=\"text-[10px] text-zinc-500 uppercase\">24h Turnover</span>\r\n          <span className=\"text-sm text-zinc-500\">\r\n            --\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1263, "column": 0}, "map": {"version":3,"sources":["file:///Users/vata/HydroX-exchange/frontend/src/components/BottomPanel.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { tradingApi, accountApi, PositionWithPnL, Position, Order, Balance } from \"@/lib/api\";\r\nimport { useWallet } from \"@/contexts/WalletContext\";\r\nimport { useToast } from \"@/components/Toast\";\r\n\r\ntype TabType = \"positions\" | \"openOrders\" | \"order_history\" | \"balances\";\r\n\r\ninterface BottomPanelProps {\r\n  walletAddress?: string | null;\r\n}\r\n\r\nexport default function BottomPanel({ walletAddress: propWalletAddress }: BottomPanelProps = {}) {\r\n  const wallet = useWallet();\r\n  const { showToast } = useToast();\r\n  const walletAddress = propWalletAddress ?? wallet?.walletAddress;\r\n\r\n  const [activeTab, setActiveTab] = useState<TabType>(\"positions\");\r\n  const [positions, setPositions] = useState<PositionWithPnL[]>([]);\r\n  const [openOrders, setOpenOrders] = useState<Order[]>([]);\r\n  const [balances, setBalances] = useState<Balance[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [initialLoad, setInitialLoad] = useState(true);\r\n  const [closingPositionId, setClosingPositionId] = useState<string | null>(null);\r\n\r\n  // Load positions with PnL from backend\r\n  useEffect(() => {\r\n    if (!walletAddress) {\r\n      setPositions([]);\r\n      setLoading(false);\r\n      setInitialLoad(false);\r\n      return;\r\n    }\r\n\r\n    const loadPositions = async () => {\r\n      // Only show loading on initial load, not on refresh\r\n      if (initialLoad) setLoading(true);\r\n\r\n      try {\r\n        const data = await tradingApi.getPositionsWithPnL(walletAddress);\r\n        setPositions(data);\r\n      } catch (err) {\r\n        console.error(\"Failed to load positions:\", err);\r\n        // Don't clear positions on error during refresh\r\n        if (initialLoad) setPositions([]);\r\n      } finally {\r\n        setLoading(false);\r\n        setInitialLoad(false);\r\n      }\r\n    };\r\n\r\n    loadPositions();\r\n    const interval = setInterval(loadPositions, 3000); // Refresh every 3 seconds\r\n    return () => clearInterval(interval);\r\n  }, [walletAddress, initialLoad]);\r\n\r\n  // Load balances from on-chain\r\n  useEffect(() => {\r\n    if (!walletAddress) {\r\n      setBalances([]);\r\n      return;\r\n    }\r\n\r\n    const loadBalances = async () => {\r\n      try {\r\n        const data = await accountApi.getBalances(walletAddress);\r\n        setBalances(data);\r\n      } catch (err) {\r\n        console.error(\"Failed to load balances:\", err);\r\n        setBalances([]);\r\n      }\r\n    };\r\n\r\n    loadBalances();\r\n    const interval = setInterval(loadBalances, 30000); // Refresh every 30 seconds\r\n    return () => clearInterval(interval);\r\n  }, [walletAddress]);\r\n\r\n  // Load position history (closed positions)\r\n  const [positionHistory, setPositionHistory] = useState<Position[]>([]);\r\n\r\n  useEffect(() => {\r\n    if (!walletAddress) {\r\n      setPositionHistory([]);\r\n      return;\r\n    }\r\n\r\n    const loadPositionHistory = async () => {\r\n      try {\r\n        const data = await tradingApi.getPositionHistory(walletAddress);\r\n        setPositionHistory(data);\r\n      } catch (err) {\r\n        console.error(\"Failed to load position history:\", err);\r\n        setPositionHistory([]);\r\n      }\r\n    };\r\n\r\n    loadPositionHistory();\r\n    // Refresh when positions change (after closing)\r\n  }, [walletAddress, positions.length]);\r\n\r\n  const handleClosePosition = async (positionId: string) => {\r\n    if (!walletAddress) return;\r\n\r\n    // Find position to get symbol for oracle lookup\r\n    const position = positions.find(p => p.id === positionId);\r\n    if (!position) {\r\n      showToast({\r\n        type: \"error\",\r\n        title: \"Position Not Found\",\r\n        message: \"Could not find position to close\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Extract base symbol (e.g., \"BTC\" from \"BTC_USDM\")\r\n    const baseSymbol = position.symbol.split(\"_\")[0];\r\n\r\n    // Check if position has on-chain reference\r\n    if (!position.tx_hash) {\r\n      showToast({\r\n        type: \"error\",\r\n        title: \"Cannot Close Position\",\r\n        message: \"Position missing on-chain reference (tx_hash). This is a legacy position.\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    setClosingPositionId(positionId);\r\n    try {\r\n      // Use WalletContext closePosition which fetches oracle-signed price\r\n      // Pass txHash#outputIndex to find exact UTxO on-chain\r\n      const result = await wallet.closePosition({\r\n        positionId,\r\n        symbol: baseSymbol,\r\n        side: position.side as 'Long' | 'Short',\r\n        txHash: position.tx_hash,\r\n        outputIndex: position.output_index ?? 0,\r\n      });\r\n\r\n      // Show result\r\n      const isPnlPositive = result.realizedPnl >= 0;\r\n      showToast({\r\n        type: isPnlPositive ? \"success\" : \"warning\",\r\n        title: \"Position Closed\",\r\n        message: isPnlPositive ? \"Trade closed with profit\" : \"Trade closed with loss\",\r\n        details: [\r\n          { label: \"Realized PnL\", value: `${isPnlPositive ? \"+\" : \"\"}$${result.realizedPnl.toFixed(2)} (${result.pnlPercent.toFixed(2)}%)` },\r\n          { label: \"Close Price\", value: `$${result.closePrice.toLocaleString()}` },\r\n        ],\r\n      });\r\n\r\n      // Remove from local state\r\n      setPositions(prev => prev.filter(p => p.id !== positionId));\r\n    } catch (err) {\r\n      console.error(\"Failed to close position:\", err);\r\n      showToast({\r\n        type: \"error\",\r\n        title: \"Failed to Close Position\",\r\n        message: \"Please try again later\",\r\n      });\r\n    } finally {\r\n      setClosingPositionId(null);\r\n    }\r\n  };\r\n\r\n  const handleCancelOrder = async (orderId: string) => {\r\n    try {\r\n      await tradingApi.cancelOrder(orderId);\r\n      setOpenOrders(prev => prev.filter(o => o.id !== orderId));\r\n    } catch (err) {\r\n      console.error(\"Failed to cancel order:\", err);\r\n    }\r\n  };\r\n\r\n  const tabs: { key: TabType; label: string; count?: number }[] = [\r\n    { key: \"positions\", label: \"Positions\", count: positions.length },\r\n    { key: \"openOrders\", label: \"Open Orders\", count: openOrders.length },\r\n    { key: \"order_history\", label: \"Trade History\", count: positionHistory.length },\r\n    { key: \"balances\", label: \"Balances\" },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"bg-[#0f0f0f] border border-[#1a1a1a] rounded-lg overflow-hidden\">\r\n      {/* Tab Header */}\r\n      <div className=\"flex border-b border-[#1f1f1f]\">\r\n        {tabs.map((tab) => (\r\n          <button\r\n            key={tab.key}\r\n            onClick={() => setActiveTab(tab.key)}\r\n            className={`px-4 py-3 text-sm font-medium transition-all ${\r\n              activeTab === tab.key\r\n                ? \"text-[#00FFE0] border-b-2 border-[#00FFE0]\"\r\n                : \"text-zinc-400 hover:text-zinc-200\"\r\n            }`}\r\n          >\r\n            {tab.label}\r\n            {tab.count !== undefined && tab.count > 0 && (\r\n              <span className={`ml-1.5 px-1.5 py-0.5 text-xs rounded ${\r\n                activeTab === tab.key\r\n                  ? \"bg-[#00FFE0]/20 text-[#00FFE0]\"\r\n                  : \"bg-zinc-700 text-zinc-300\"\r\n              }`}>\r\n                {tab.count}\r\n              </span>\r\n            )}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Tab Content */}\r\n      <div className=\"h-[200px] overflow-y-auto scrollbar-hide\">\r\n        {loading ? (\r\n          <div className=\"flex items-center justify-center h-full text-zinc-500\">\r\n            <span className=\"animate-pulse\">Loading...</span>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            {activeTab === \"positions\" && (\r\n              <PositionsTable positions={positions} onClose={handleClosePosition} closingId={closingPositionId} />\r\n            )}\r\n            {activeTab === \"openOrders\" && (\r\n              <OpenOrdersTable orders={openOrders} onCancel={handleCancelOrder} />\r\n            )}\r\n            {activeTab === \"order_history\" && (\r\n              <PositionHistoryTable positions={positionHistory} />\r\n            )}\r\n            {activeTab === \"balances\" && (\r\n              <BalancesTable balances={balances} />\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction EmptyState({ message, icon }: { message: string; icon: React.ReactNode }) {\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center h-full text-zinc-500\">\r\n      <div className=\"opacity-30 mb-2\">{icon}</div>\r\n      <p className=\"text-sm\">{message}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction PositionsTable({\r\n  positions,\r\n  onClose,\r\n  closingId\r\n}: {\r\n  positions: PositionWithPnL[];\r\n  onClose: (id: string) => void;\r\n  closingId?: string | null;\r\n}) {\r\n  if (positions.length === 0) {\r\n    return (\r\n      <EmptyState\r\n        message=\"No open positions\"\r\n        icon={\r\n          <svg className=\"w-10 h-10\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\" />\r\n          </svg>\r\n        }\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <table className=\"w-full text-sm\">\r\n      <thead className=\"text-zinc-400 text-xs sticky top-0 bg-[#0f0f0f]\">\r\n        <tr className=\"border-b border-[#1f1f1f]\">\r\n          <th className=\"text-left px-4 py-2 font-medium\">Symbol</th>\r\n          <th className=\"text-left px-4 py-2 font-medium\">Side</th>\r\n          <th className=\"text-right px-4 py-2 font-medium\">Size (BTC)</th>\r\n          <th className=\"text-right px-4 py-2 font-medium\">Notional (USDM)</th>\r\n          <th className=\"text-right px-4 py-2 font-medium\">Collateral</th>\r\n          <th className=\"text-right px-4 py-2 font-medium\">Entry Price</th>\r\n          <th className=\"text-right px-4 py-2 font-medium\">Mark Price</th>\r\n          <th className=\"text-right px-4 py-2 font-medium\">PnL (ROE%)</th>\r\n          <th className=\"text-right px-4 py-2 font-medium\">Leverage</th>\r\n          <th className=\"text-right px-4 py-2 font-medium\">Liq. Price</th>\r\n          <th className=\"text-center px-4 py-2 font-medium\">Actions</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {positions.map((pos) => {\r\n          const isPnlPositive = pos.unrealized_pnl >= 0;\r\n          const isClosing = closingId === pos.id;\r\n          // Notional value = size * entry price (position value in USDM)\r\n          const notionalValue = pos.amount * pos.entry_price;\r\n          return (\r\n            <tr key={pos.id} className=\"border-b border-[#1f1f1f]/50 hover:bg-[#00FFE0]/5 transition-colors\">\r\n              <td className=\"px-4 py-3 text-white\">{pos.symbol.replace(/_USDM$/, \"\")}</td>\r\n              <td className={`px-4 py-3 ${pos.side === \"Long\" ? \"text-[#00FFE0]\" : \"text-red-500\"}`}>\r\n                {pos.side}\r\n              </td>\r\n              <td className=\"px-4 py-3 text-right text-white\">{pos.amount.toFixed(4)}</td>\r\n              <td className=\"px-4 py-3 text-right text-zinc-300\">${notionalValue.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</td>\r\n              <td className=\"px-4 py-3 text-right text-zinc-300\">${pos.collateral.toLocaleString(undefined, { minimumFractionDigits: 2 })}</td>\r\n              <td className=\"px-4 py-3 text-right text-zinc-300\">${pos.entry_price.toLocaleString(undefined, { minimumFractionDigits: 2 })}</td>\r\n              <td className=\"px-4 py-3 text-right text-zinc-300\">${pos.mark_price.toLocaleString(undefined, { minimumFractionDigits: 2 })}</td>\r\n              <td className={`px-4 py-3 text-right font-medium ${isPnlPositive ? \"text-[#00FFE0]\" : \"text-red-500\"}`}>\r\n                ${isPnlPositive ? \"+\" : \"\"}{pos.unrealized_pnl.toFixed(2)} ({pos.pnl_percent.toFixed(2)}%)\r\n              </td>\r\n              <td className=\"px-4 py-3 text-right text-[#00FFE0]/70\">{pos.leverage}x</td>\r\n              <td className=\"px-4 py-3 text-right text-zinc-400\">${pos.liquidation_price.toFixed(2)}</td>\r\n              <td className=\"px-4 py-3 text-center\">\r\n                <button className=\"px-2 py-1 text-xs bg-[#1a1a1a] hover:bg-[#00FFE0]/10 hover:text-[#00FFE0] border border-[#1f1f1f] hover:border-[#00FFE0]/30 rounded mr-1 transition-all\">\r\n                  TP/SL\r\n                </button>\r\n                <button\r\n                  onClick={() => onClose(pos.id)}\r\n                  disabled={isClosing}\r\n                  className={`px-2 py-1 text-xs border rounded transition-all ${\r\n                    isClosing\r\n                      ? \"bg-zinc-700 text-zinc-400 border-zinc-600 cursor-not-allowed\"\r\n                      : \"bg-red-500/10 text-red-400 hover:bg-red-500/20 border-red-500/30\"\r\n                  }`}\r\n                >\r\n                  {isClosing ? \"Closing...\" : \"Close\"}\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          );\r\n        })}\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\nfunction OpenOrdersTable({ orders, onCancel }: { orders: Order[]; onCancel: (id: string) => void }) {\r\n  if (orders.length === 0) {\r\n    return (\r\n      <EmptyState\r\n        message=\"No open orders\"\r\n        icon={\r\n          <svg className=\"w-10 h-10\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\r\n          </svg>\r\n        }\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <table className=\"w-full text-sm\">\r\n      <thead className=\"text-zinc-400 text-xs sticky top-0 bg-[#0f0f0f]\">\r\n        <tr className=\"border-b border-[#1f1f1f]\">\r\n          <th className=\"text-left px-4 py-2 font-medium\">Time</th>\r\n          <th className=\"text-left px-4 py-2 font-medium\">Symbol</th>\r\n          <th className=\"text-left px-4 py-2 font-medium\">Type</th>\r\n          <th className=\"text-left px-4 py-2 font-medium\">Side</th>\r\n          <th className=\"text-right px-4 py-2 font-medium\">Price</th>\r\n          <th className=\"text-right px-4 py-2 font-medium\">Amount</th>\r\n          <th className=\"text-right px-4 py-2 font-medium\">Filled</th>\r\n          <th className=\"text-center px-4 py-2 font-medium\">Actions</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {orders.map((order) => (\r\n          <tr key={order.id} className=\"border-b border-[#1f1f1f]/50 hover:bg-[#00FFE0]/5 transition-colors\">\r\n            <td className=\"px-4 py-3 text-zinc-400\">{order.created_at}</td>\r\n            <td className=\"px-4 py-3 text-white\">{order.symbol.replace(/_/g, \"/\")}</td>\r\n            <td className=\"px-4 py-3 text-zinc-300\">{order.type}</td>\r\n            <td className={`px-4 py-3 ${order.side === \"Buy\" ? \"text-[#00FFE0]\" : \"text-red-500\"}`}>\r\n              {order.side}\r\n            </td>\r\n            <td className=\"px-4 py-3 text-right text-zinc-300\">${order.price}</td>\r\n            <td className=\"px-4 py-3 text-right text-white\">{order.amount}</td>\r\n            <td className=\"px-4 py-3 text-right text-zinc-400\">{order.filled}</td>\r\n            <td className=\"px-4 py-3 text-center\">\r\n              <button className=\"px-2 py-1 text-xs bg-[#1a1a1a] hover:bg-[#00FFE0]/10 hover:text-[#00FFE0] border border-[#1f1f1f] hover:border-[#00FFE0]/30 rounded mr-1 transition-all\">\r\n                Edit\r\n              </button>\r\n              <button \r\n                onClick={() => onCancel(order.id)}\r\n                className=\"px-2 py-1 text-xs bg-red-500/10 text-red-400 hover:bg-red-500/20 border border-red-500/30 rounded transition-all\"\r\n              >\r\n                Cancel\r\n              </button>\r\n            </td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\nfunction PositionHistoryTable({ positions }: { positions: Position[] }) {\r\n  if (positions.length === 0) {\r\n    return (\r\n      <EmptyState\r\n        message=\"No closed positions\"\r\n        icon={\r\n          <svg className=\"w-10 h-10\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n          </svg>\r\n        }\r\n      />\r\n    );\r\n  }\r\n\r\n  // Helper to format symbol (remove _USDM suffix for display)\r\n  const formatSymbol = (symbol: string) => {\r\n    return symbol.replace(/_USDM$/, \"\").replace(/_/g, \"/\");\r\n  };\r\n\r\n  return (\r\n    <table className=\"w-full text-sm\">\r\n      <thead className=\"text-zinc-400 text-xs sticky top-0 bg-[#0f0f0f]\">\r\n        <tr className=\"border-b border-[#1f1f1f]\">\r\n          <th className=\"text-left px-4 py-2 font-medium\">Closed At</th>\r\n          <th className=\"text-left px-4 py-2 font-medium\">Symbol</th>\r\n          <th className=\"text-left px-4 py-2 font-medium\">Side</th>\r\n          <th className=\"text-right px-4 py-2 font-medium\">Size (BTC)</th>\r\n          <th className=\"text-right px-4 py-2 font-medium\">Notional (USDM)</th>\r\n          <th className=\"text-right px-4 py-2 font-medium\">Entry Price</th>\r\n          <th className=\"text-right px-4 py-2 font-medium\">Close Price</th>\r\n          <th className=\"text-right px-4 py-2 font-medium\">Realized PnL</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {positions.map((pos) => {\r\n          const pnl = pos.realized_pnl || 0;\r\n          const isPnlPositive = pnl >= 0;\r\n          const pnlPercent = pos.collateral > 0 ? (pnl / pos.collateral) * 100 : 0;\r\n          const notionalValue = pos.amount * pos.entry_price;\r\n          return (\r\n            <tr key={pos.id} className=\"border-b border-[#1f1f1f]/50 hover:bg-[#00FFE0]/5 transition-colors\">\r\n              <td className=\"px-4 py-3 text-zinc-400\">\r\n                {pos.closed_at ? new Date(pos.closed_at).toLocaleString() : '-'}\r\n              </td>\r\n              <td className=\"px-4 py-3 text-white\">{formatSymbol(pos.symbol)}</td>\r\n              <td className={`px-4 py-3 ${pos.side === \"Long\" ? \"text-[#00FFE0]\" : \"text-red-500\"}`}>\r\n                {pos.side}\r\n              </td>\r\n              <td className=\"px-4 py-3 text-right text-white\">{pos.amount.toFixed(4)}</td>\r\n              <td className=\"px-4 py-3 text-right text-zinc-300\">\r\n                ${notionalValue.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n              </td>\r\n              <td className=\"px-4 py-3 text-right text-zinc-300\">\r\n                ${pos.entry_price.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n              </td>\r\n              <td className=\"px-4 py-3 text-right text-zinc-300\">\r\n                ${pos.close_price?.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 }) || '-'}\r\n              </td>\r\n              <td className={`px-4 py-3 text-right font-medium ${isPnlPositive ? \"text-[#00FFE0]\" : \"text-red-500\"}`}>\r\n                {isPnlPositive ? \"+\" : \"\"}${pnl.toFixed(2)} ({pnlPercent.toFixed(2)}%)\r\n              </td>\r\n            </tr>\r\n          );\r\n        })}\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\nfunction BalancesTable({ balances }: { balances: Balance[] }) {\r\n  if (balances.length === 0) {\r\n    return (\r\n      <EmptyState\r\n        message=\"No assets\"\r\n        icon={\r\n          <svg className=\"w-10 h-10\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" d=\"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z\" />\r\n          </svg>\r\n        }\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <table className=\"w-full text-sm\">\r\n      <thead className=\"text-zinc-400 text-xs sticky top-0 bg-[#0f0f0f]\">\r\n        <tr className=\"border-b border-[#1f1f1f]\">\r\n          <th className=\"text-left px-4 py-2 font-medium\">Asset</th>\r\n          <th className=\"text-right px-4 py-2 font-medium\">Available</th>\r\n          <th className=\"text-right px-4 py-2 font-medium\">In Order</th>\r\n          <th className=\"text-right px-4 py-2 font-medium\">Total</th>\r\n          <th className=\"text-center px-4 py-2 font-medium\">Actions</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {balances.map((balance) => (\r\n          <tr key={balance.asset} className=\"border-b border-[#1f1f1f]/50 hover:bg-[#00FFE0]/5 transition-colors\">\r\n            <td className=\"px-4 py-3\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"w-6 h-6 bg-[#00FFE0]/10 border border-[#00FFE0]/30 rounded-full flex items-center justify-center text-xs font-bold text-[#00FFE0]\">\r\n                  {balance.asset.charAt(0)}\r\n                </div>\r\n                <span className=\"text-white font-medium\">{balance.asset}</span>\r\n              </div>\r\n            </td>\r\n            <td className=\"px-4 py-3 text-right text-white\">{balance.available.toFixed(2)}</td>\r\n            <td className=\"px-4 py-3 text-right text-zinc-400\">{balance.locked.toFixed(2)}</td>\r\n            <td className=\"px-4 py-3 text-right text-zinc-300\">{balance.total.toFixed(2)}</td>\r\n            <td className=\"px-4 py-3 text-center\">\r\n              <button className=\"px-2 py-1 text-xs bg-[#00FFE0]/10 text-[#00FFE0] hover:bg-[#00FFE0]/20 border border-[#00FFE0]/30 rounded mr-1 transition-all\">\r\n                Deposit\r\n              </button>\r\n              <button className=\"px-2 py-1 text-xs bg-[#1a1a1a] hover:bg-[#1f1f1f] border border-[#1f1f1f] rounded transition-all\">\r\n                Withdraw\r\n              </button>\r\n            </td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2577, "column": 0}, "map": {"version":3,"sources":["file:///Users/vata/HydroX-exchange/frontend/app/perpetuals/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Chart from \"@/components/Chart\";\r\nimport TradePanel from \"@/components/TradePanel\";\r\nimport MarketInfo from \"@/components/MarketInfo\";\r\nimport BottomPanel from \"@/components/BottomPanel\";\r\nimport { useWallet } from \"@/contexts/WalletContext\";\r\n\r\nexport default function PerpetualsPage() {\r\n  const symbol = \"BTC_USDM\";\r\n  const { walletAddress } = useWallet();\r\n\r\n  return (\r\n    <div\r\n      className=\"bg-[#0a0a0a] font-sans h-full flex flex-col\"\r\n      style={{ overflowY: \"overlay\" }}\r\n    >\r\n      <div id=\"exchange\" className=\"p-4 flex flex-col gap-3\">\r\n        {/* 시장 정보 - BTC 고정 */}\r\n        <div className=\"flex items-stretch bg-[#0f0f0f] border border-[#1a1a1a] rounded-lg shrink-0\">\r\n          <div className=\"px-4 py-3 flex items-center border-r border-[#1f1f1f]\">\r\n            <span className=\"text-white font-bold text-lg\">BTC/USDM</span>\r\n            <span className=\"ml-2 text-xs px-1.5 py-0.5 rounded bg-[#00FFE0]/10 text-[#00FFE0] border border-[#00FFE0]/30\">\r\n              PERP\r\n            </span>\r\n          </div>\r\n          <MarketInfo symbol={symbol} />\r\n        </div>\r\n\r\n        <main className=\"w-full flex h-[600px] gap-3\">\r\n          {/* 차트 - Trade History 제거로 인해 더 넓게 */}\r\n          <div className=\"w-3/4 h-full\">\r\n            <Chart symbol={symbol} />\r\n          </div>\r\n          {/* 거래 패널 */}\r\n          <div className=\"w-1/4 h-full\">\r\n            <TradePanel walletAddress={walletAddress} />\r\n          </div>\r\n        </main>\r\n\r\n        {/* 하단 패널: 포지션, 주문, 잔고 */}\r\n        <div className=\"shrink-0\">\r\n          <BottomPanel />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;AANA;;;;;;AAQe,SAAS;;IACtB,MAAM,SAAS;IACf,MAAM,EAAE,aAAa,EAAE,GAAG,IAAA,iJAAS;IAEnC,qBACE,6LAAC;QACC,WAAU;QACV,OAAO;YAAE,WAAW;QAAU;kBAE9B,cAAA,6LAAC;YAAI,IAAG;YAAW,WAAU;;8BAE3B,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAK,WAAU;8CAA+B;;;;;;8CAC/C,6LAAC;oCAAK,WAAU;8CAA+F;;;;;;;;;;;;sCAIjH,6LAAC,8IAAU;4BAAC,QAAQ;;;;;;;;;;;;8BAGtB,6LAAC;oBAAK,WAAU;;sCAEd,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,yIAAK;gCAAC,QAAQ;;;;;;;;;;;sCAGjB,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,8IAAU;gCAAC,eAAe;;;;;;;;;;;;;;;;;8BAK/B,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC,+IAAW;;;;;;;;;;;;;;;;;;;;;AAKtB;GAvCwB;;QAEI,iJAAS;;;KAFb"}}]
}