{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/vata/HydroX-exchange/frontend/app/stats/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { configApi, ContractConfig } from \"@/lib/api\";\r\n\r\n// UTxO info for statistics\r\ninterface UtxoInfo {\r\n  txHash: string;\r\n  outputIndex: number;\r\n  lovelace: number;\r\n  assets: { unit: string; quantity: number }[];\r\n  datum?: string;\r\n}\r\n\r\ninterface ScriptStats {\r\n  address: string;\r\n  hash: string;\r\n  utxoCount: number;\r\n  totalAda: number;\r\n  totalUsdm: number;\r\n  utxos: UtxoInfo[];\r\n}\r\n\r\nexport default function StatsPage() {\r\n  const [contractConfig, setContractConfig] = useState<ContractConfig | null>(null);\r\n  const [vaultStats, setVaultStats] = useState<ScriptStats | null>(null);\r\n  const [positionStats, setPositionStats] = useState<ScriptStats | null>(null);\r\n  const [statsLoading, setStatsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const formatUSDM = (num: number | undefined) => {\r\n    if (num === undefined || num === 0) return \"0\";\r\n    return new Intl.NumberFormat(\"en-US\", {\r\n      minimumFractionDigits: 0,\r\n      maximumFractionDigits: 0,\r\n    }).format(num);\r\n  };\r\n\r\n  // Load statistics data (UTxOs from both scripts)\r\n  const loadStats = async () => {\r\n    setStatsLoading(true);\r\n    setError(null);\r\n    try {\r\n      const config = await configApi.getContractConfig();\r\n      console.log(\"Loaded config:\", config);\r\n      setContractConfig(config);\r\n\r\n      // Use hardcoded Blockfrost settings for Preview testnet\r\n      // These are public testnet credentials\r\n      const BLOCKFROST_URL = \"https://cardano-preview.blockfrost.io/api/v0\";\r\n      const BLOCKFROST_KEY = \"previewxYyB0Uj87BX2fEUwMVgsMuq8OYdvaOFe\";\r\n\r\n      // Helper to fetch UTxOs from an address\r\n      const fetchUtxos = async (address: string): Promise<UtxoInfo[]> => {\r\n        try {\r\n          console.log(\"Fetching UTxOs for address:\", address);\r\n          const response = await fetch(`${BLOCKFROST_URL}/addresses/${address}/utxos`, {\r\n            headers: { project_id: BLOCKFROST_KEY },\r\n          });\r\n          if (!response.ok) {\r\n            const errorText = await response.text();\r\n            console.error(`Blockfrost error for ${address}:`, response.status, errorText);\r\n            return [];\r\n          }\r\n          const utxos = await response.json();\r\n          console.log(`Found ${utxos.length} UTxOs for ${address.slice(0, 20)}...`);\r\n          return utxos.map((u: { tx_hash: string; output_index: number; amount: { unit: string; quantity: string }[]; inline_datum?: string }) => ({\r\n            txHash: u.tx_hash,\r\n            outputIndex: u.output_index,\r\n            lovelace: parseInt(u.amount.find((a: { unit: string }) => a.unit === \"lovelace\")?.quantity || \"0\"),\r\n            assets: u.amount\r\n              .filter((a: { unit: string }) => a.unit !== \"lovelace\")\r\n              .map((a: { unit: string; quantity: string }) => ({ unit: a.unit, quantity: parseInt(a.quantity) })),\r\n            datum: u.inline_datum,\r\n          }));\r\n        } catch (err) {\r\n          console.error(`Failed to fetch UTxOs for ${address}:`, err);\r\n          return [];\r\n        }\r\n      };\r\n\r\n      // Fetch vault UTxOs\r\n      if (config.vault_script_addr) {\r\n        const vaultUtxos = await fetchUtxos(config.vault_script_addr);\r\n        const usdmUnit = config.usdm_policy_id + config.usdm_asset_name;\r\n        setVaultStats({\r\n          address: config.vault_script_addr,\r\n          hash: config.vault_script_hash || \"\",\r\n          utxoCount: vaultUtxos.length,\r\n          totalAda: vaultUtxos.reduce((sum, u) => sum + u.lovelace, 0) / 1_000_000,\r\n          totalUsdm: vaultUtxos.reduce((sum, u) => {\r\n            const usdm = u.assets.find(a => a.unit === usdmUnit);\r\n            return sum + (usdm?.quantity || 0);\r\n          }, 0),\r\n          utxos: vaultUtxos,\r\n        });\r\n      }\r\n\r\n      // Fetch position UTxOs\r\n      if (config.position_script_addr) {\r\n        const positionUtxos = await fetchUtxos(config.position_script_addr);\r\n        const usdmUnit = config.usdm_policy_id + config.usdm_asset_name;\r\n        setPositionStats({\r\n          address: config.position_script_addr,\r\n          hash: config.position_script_hash || \"\",\r\n          utxoCount: positionUtxos.length,\r\n          totalAda: positionUtxos.reduce((sum, u) => sum + u.lovelace, 0) / 1_000_000,\r\n          totalUsdm: positionUtxos.reduce((sum, u) => {\r\n            const usdm = u.assets.find(a => a.unit === usdmUnit);\r\n            return sum + (usdm?.quantity || 0);\r\n          }, 0),\r\n          utxos: positionUtxos,\r\n        });\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Failed to load stats:\", err);\r\n      // Try to show a more helpful error message\r\n      if (err instanceof Error && err.message.includes(\"API Error\")) {\r\n        setError(\"Backend API might not be running. Make sure the gateway service is up.\");\r\n      } else {\r\n        setError(err instanceof Error ? err.message : \"Failed to load statistics\");\r\n      }\r\n    } finally {\r\n      setStatsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Load stats on mount\r\n  useEffect(() => {\r\n    loadStats();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"bg-[#0a0a0a] font-sans h-full overflow-auto\">\r\n      <div className=\"p-4 flex flex-col gap-4 max-w-7xl mx-auto\">\r\n        {/* Dev Mode Banner */}\r\n        <div className=\"bg-yellow-500/10 border border-yellow-500/30 border-dashed rounded-lg p-4 flex items-center gap-3\">\r\n          <div className=\"w-10 h-10 rounded-lg bg-yellow-500/20 flex items-center justify-center\">\r\n            <svg className=\"w-5 h-5 text-yellow-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\r\n            </svg>\r\n          </div>\r\n          <div className=\"flex-1\">\r\n            <p className=\"text-yellow-500 text-sm font-medium\">Development Statistics</p>\r\n            <p className=\"text-yellow-500/70 text-xs\">On-chain data for debugging and monitoring. Not for production use.</p>\r\n          </div>\r\n          <button\r\n            onClick={loadStats}\r\n            disabled={statsLoading}\r\n            className=\"px-4 py-2 text-sm bg-yellow-500/20 text-yellow-500 rounded-lg border border-yellow-500/30 hover:bg-yellow-500/30 transition-colors disabled:opacity-50\"\r\n          >\r\n            {statsLoading ? \"Loading...\" : \"Refresh\"}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Error Display */}\r\n        {error && (\r\n          <div className=\"bg-red-500/10 border border-red-500/30 rounded-lg p-4 flex items-center gap-3\">\r\n            <div className=\"w-10 h-10 rounded-lg bg-red-500/20 flex items-center justify-center\">\r\n              <svg className=\"w-5 h-5 text-red-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n              </svg>\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <p className=\"text-red-500 text-sm font-medium\">Error Loading Data</p>\r\n              <p className=\"text-red-500/70 text-xs\">{error}</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Contract Configuration */}\r\n        <div className=\"bg-[#0f0f0f] border border-dashed border-yellow-500/30 rounded-lg p-4\">\r\n          <h3 className=\"text-yellow-500 text-sm font-medium mb-3 flex items-center gap-2\">\r\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" />\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n            </svg>\r\n            Contract Configuration\r\n          </h3>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 text-xs font-mono\">\r\n            <div className=\"bg-[#0a0a0a] rounded p-3\">\r\n              <span className=\"text-zinc-500 block mb-1\">Network</span>\r\n              <span className=\"text-zinc-300\">{contractConfig?.network || \"--\"}</span>\r\n            </div>\r\n            <div className=\"bg-[#0a0a0a] rounded p-3\">\r\n              <span className=\"text-zinc-500 block mb-1\">USDM Policy ID</span>\r\n              <span className=\"text-zinc-300 break-all text-[10px]\">{contractConfig?.usdm_policy_id || \"--\"}</span>\r\n            </div>\r\n            <div className=\"bg-[#0a0a0a] rounded p-3\">\r\n              <span className=\"text-zinc-500 block mb-1\">Vault Script Hash</span>\r\n              <span className=\"text-zinc-300 break-all text-[10px]\">{contractConfig?.vault_script_hash || \"--\"}</span>\r\n            </div>\r\n            <div className=\"bg-[#0a0a0a] rounded p-3\">\r\n              <span className=\"text-zinc-500 block mb-1\">Position Script Hash</span>\r\n              <span className=\"text-zinc-300 break-all text-[10px]\">{contractConfig?.position_script_hash || \"--\"}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Platform Summary */}\r\n        <div className=\"bg-[#0f0f0f] border border-[#1a1a1a] rounded-lg p-4\">\r\n          <h3 className=\"text-white text-sm font-medium mb-3\">Platform Summary</h3>\r\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n            <div className=\"bg-[#0a0a0a] rounded-lg p-4 border border-[#1f1f1f]\">\r\n              <p className=\"text-zinc-500 text-xs mb-1\">Total Value Locked</p>\r\n              <p className=\"text-white text-2xl font-bold\">\r\n                {formatUSDM((vaultStats?.totalUsdm || 0) + (positionStats?.totalUsdm || 0))}\r\n                <span className=\"text-sm font-normal text-zinc-400 ml-1\">USDM</span>\r\n              </p>\r\n            </div>\r\n            <div className=\"bg-[#0a0a0a] rounded-lg p-4 border border-[#1f1f1f]\">\r\n              <p className=\"text-zinc-500 text-xs mb-1\">Vault Liquidity</p>\r\n              <p className=\"text-[#00FFE0] text-2xl font-bold\">\r\n                {formatUSDM(vaultStats?.totalUsdm)}\r\n                <span className=\"text-sm font-normal text-zinc-400 ml-1\">USDM</span>\r\n              </p>\r\n            </div>\r\n            <div className=\"bg-[#0a0a0a] rounded-lg p-4 border border-[#1f1f1f]\">\r\n              <p className=\"text-zinc-500 text-xs mb-1\">Position Collateral</p>\r\n              <p className=\"text-purple-400 text-2xl font-bold\">\r\n                {formatUSDM(positionStats?.totalUsdm)}\r\n                <span className=\"text-sm font-normal text-zinc-400 ml-1\">USDM</span>\r\n              </p>\r\n            </div>\r\n            <div className=\"bg-[#0a0a0a] rounded-lg p-4 border border-[#1f1f1f]\">\r\n              <p className=\"text-zinc-500 text-xs mb-1\">Utilization Rate</p>\r\n              <p className=\"text-white text-2xl font-bold\">\r\n                {vaultStats?.totalUsdm && positionStats?.totalUsdm\r\n                  ? ((positionStats.totalUsdm / (vaultStats.totalUsdm + positionStats.totalUsdm)) * 100).toFixed(1)\r\n                  : \"--\"}\r\n                <span className=\"text-sm font-normal text-zinc-400 ml-1\">%</span>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Two Column Layout for Scripts */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\r\n          {/* Vault Script Stats */}\r\n          <div className=\"bg-[#0f0f0f] border border-dashed border-[#00FFE0]/30 rounded-lg p-4\">\r\n            <h3 className=\"text-[#00FFE0] text-sm font-medium mb-3 flex items-center gap-2\">\r\n              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\r\n              </svg>\r\n              Vault Script\r\n            </h3>\r\n\r\n            <div className=\"grid grid-cols-2 gap-3 mb-4\">\r\n              <div className=\"bg-[#0a0a0a] rounded p-3 border border-[#00FFE0]/10\">\r\n                <p className=\"text-zinc-500 text-xs\">UTxO Count</p>\r\n                <p className=\"text-[#00FFE0] text-xl font-bold\">{vaultStats?.utxoCount ?? \"--\"}</p>\r\n              </div>\r\n              <div className=\"bg-[#0a0a0a] rounded p-3 border border-[#00FFE0]/10\">\r\n                <p className=\"text-zinc-500 text-xs\">Total ADA</p>\r\n                <p className=\"text-white text-xl font-bold\">{vaultStats?.totalAda?.toFixed(2) ?? \"--\"}</p>\r\n              </div>\r\n              <div className=\"bg-[#0a0a0a] rounded p-3 border border-[#00FFE0]/10\">\r\n                <p className=\"text-zinc-500 text-xs\">Total USDM</p>\r\n                <p className=\"text-[#00FFE0] text-xl font-bold\">{formatUSDM(vaultStats?.totalUsdm)}</p>\r\n              </div>\r\n              <div className=\"bg-[#0a0a0a] rounded p-3 border border-[#00FFE0]/10\">\r\n                <p className=\"text-zinc-500 text-xs\">Script Hash</p>\r\n                <p className=\"text-zinc-400 text-[10px] font-mono truncate\">{vaultStats?.hash ?? \"--\"}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"text-xs font-mono bg-[#0a0a0a] rounded p-2 mb-3\">\r\n              <span className=\"text-zinc-500\">Address:</span>{\" \"}\r\n              <a\r\n                href={`https://preview.cardanoscan.io/address/${vaultStats?.address}`}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                className=\"text-[#00FFE0] hover:underline break-all\"\r\n              >\r\n                {vaultStats?.address || \"--\"}\r\n              </a>\r\n            </div>\r\n\r\n            {/* Vault UTxO List */}\r\n            {vaultStats?.utxos && vaultStats.utxos.length > 0 ? (\r\n              <div className=\"border border-[#1f1f1f] rounded overflow-hidden\">\r\n                <div className=\"bg-[#141414] px-3 py-2 text-xs text-zinc-400 border-b border-[#1f1f1f]\">\r\n                  UTxO Details ({vaultStats.utxos.length})\r\n                </div>\r\n                <div className=\"max-h-64 overflow-y-auto\">\r\n                  {vaultStats.utxos.map((utxo) => (\r\n                    <div key={`${utxo.txHash}#${utxo.outputIndex}`} className=\"px-3 py-2 text-xs border-b border-[#1f1f1f]/50 hover:bg-[#141414]\">\r\n                      <div className=\"flex justify-between items-center\">\r\n                        <a\r\n                          href={`https://preview.cardanoscan.io/transaction/${utxo.txHash}`}\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                          className=\"text-[#00FFE0] hover:underline font-mono\"\r\n                        >\r\n                          {utxo.txHash.slice(0, 12)}...#{utxo.outputIndex}\r\n                        </a>\r\n                        <div className=\"text-right\">\r\n                          <span className=\"text-zinc-400\">{(utxo.lovelace / 1_000_000).toFixed(2)} ADA</span>\r\n                          {utxo.assets.length > 0 && (\r\n                            <span className=\"ml-2 text-[#00FFE0]\">\r\n                              +{utxo.assets.length} asset{utxo.assets.length > 1 ? \"s\" : \"\"}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"text-center text-zinc-500 py-4 text-sm border border-[#1f1f1f] rounded\">\r\n                No vault UTxOs found\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Position Script Stats */}\r\n          <div className=\"bg-[#0f0f0f] border border-dashed border-purple-500/30 rounded-lg p-4\">\r\n            <h3 className=\"text-purple-400 text-sm font-medium mb-3 flex items-center gap-2\">\r\n              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n              </svg>\r\n              Position Script\r\n            </h3>\r\n\r\n            <div className=\"grid grid-cols-2 gap-3 mb-4\">\r\n              <div className=\"bg-[#0a0a0a] rounded p-3 border border-purple-500/10\">\r\n                <p className=\"text-zinc-500 text-xs\">Open Positions</p>\r\n                <p className=\"text-purple-400 text-xl font-bold\">{positionStats?.utxoCount ?? \"--\"}</p>\r\n              </div>\r\n              <div className=\"bg-[#0a0a0a] rounded p-3 border border-purple-500/10\">\r\n                <p className=\"text-zinc-500 text-xs\">Total ADA Locked</p>\r\n                <p className=\"text-white text-xl font-bold\">{positionStats?.totalAda?.toFixed(2) ?? \"--\"}</p>\r\n              </div>\r\n              <div className=\"bg-[#0a0a0a] rounded p-3 border border-purple-500/10\">\r\n                <p className=\"text-zinc-500 text-xs\">Total Collateral</p>\r\n                <p className=\"text-purple-400 text-xl font-bold\">{formatUSDM(positionStats?.totalUsdm)}</p>\r\n              </div>\r\n              <div className=\"bg-[#0a0a0a] rounded p-3 border border-purple-500/10\">\r\n                <p className=\"text-zinc-500 text-xs\">Script Hash</p>\r\n                <p className=\"text-zinc-400 text-[10px] font-mono truncate\">{positionStats?.hash ?? \"--\"}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"text-xs font-mono bg-[#0a0a0a] rounded p-2 mb-3\">\r\n              <span className=\"text-zinc-500\">Address:</span>{\" \"}\r\n              <a\r\n                href={`https://preview.cardanoscan.io/address/${positionStats?.address}`}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                className=\"text-purple-400 hover:underline break-all\"\r\n              >\r\n                {positionStats?.address || \"--\"}\r\n              </a>\r\n            </div>\r\n\r\n            {/* Position UTxO List */}\r\n            {positionStats?.utxos && positionStats.utxos.length > 0 ? (\r\n              <div className=\"border border-[#1f1f1f] rounded overflow-hidden\">\r\n                <div className=\"bg-[#141414] px-3 py-2 text-xs text-zinc-400 border-b border-[#1f1f1f]\">\r\n                  Position UTxOs ({positionStats.utxos.length})\r\n                </div>\r\n                <div className=\"max-h-64 overflow-y-auto\">\r\n                  {positionStats.utxos.map((utxo) => (\r\n                    <div key={`${utxo.txHash}#${utxo.outputIndex}`} className=\"px-3 py-2 text-xs border-b border-[#1f1f1f]/50 hover:bg-[#141414]\">\r\n                      <div className=\"flex justify-between items-center\">\r\n                        <a\r\n                          href={`https://preview.cardanoscan.io/transaction/${utxo.txHash}`}\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                          className=\"text-purple-400 hover:underline font-mono\"\r\n                        >\r\n                          {utxo.txHash.slice(0, 12)}...#{utxo.outputIndex}\r\n                        </a>\r\n                        <div className=\"text-right\">\r\n                          <span className=\"text-zinc-400\">{(utxo.lovelace / 1_000_000).toFixed(2)} ADA</span>\r\n                          {utxo.assets.length > 0 && (\r\n                            <span className=\"ml-2 text-purple-400\">\r\n                              +{utxo.assets.length} asset{utxo.assets.length > 1 ? \"s\" : \"\"}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"text-center text-zinc-500 py-4 text-sm border border-[#1f1f1f] rounded\">\r\n                No open positions\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}